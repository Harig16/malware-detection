# Malware-detection

Run program:
```
./run.sh
```
When you run ./run.sh file gets following information. Enter the following details:

for example:

```
Total No of class(integer) : 9
Source file(eg: <source img path>/) : train
Destination file (eg: <dest img path/>)  : train_img
Dimension size(eg: 32, 64 etc) : 32
Model Name(eg: <random_name>) : microsoft
No of epochs(eg: 50, 100 etc) : 50
```

The model is trained and tested in both dataset Microsoft malware classification(2015) and malimg dataset.
Each file is represented as 2D gray scale and image feature is used for malware detection. Data is splited into 80% for training and 20% for testing.The model have achieved 96.5% and 98.17% respectively.

## Microsoft Malware Classification
Dataset which has 9 malware families. Total no of file is 10868

#### Model Evaluation...
```
2174/2174 [==============================] - 1s 587us/step
Test_Loss: 0.197847217046, Test_accuracy: 0.965961361546
```
#### Precision and Recall

| class  | precision |   recall | f1-score |  support |
|--------|-----------|----------|----------|----------|
|1       |    0.93   |   0.99   |   0.96   |    209   |
|2       |    0.95   |   0.97   |   0.96   |     89   |
|3       |    0.99   |   1.00   |   0.99   |    584   |
|4       |    0.99   |   0.97   |   0.98   |    515   |
|5       |    0.96   |   0.90   |   0.93   |    227   |
|6       |    0.94   |   0.95   |   0.94   |    314   |
|7       |    0.83   |   0.62   |   0.71   |      8   |
|8       |   0.92    |  0.92    |  0.92    |   144    |
|9       |    0.98   |   0.98   |   0.98   |     84   |
|micro avg     |  0.97    |  0.97    |  0.97   | 2174 |
|macro avg     |  0.94    |  0.92    |  0.93   | 2174 |
|weighted avg  |  0.97    |  0.97    |  0.97   | 2174 |

## Malimg dataset
Dataset which has 25 malware families. Total no of file is 9365

#### Model Evaluation...
```
1868/1868 [==============================] - 1s 534us/step
Test_Loss: 0.0763750024198, Test_accuracy: 0.981798715203
```
#### Precision and Recall

| class  | precision |   recall | f1-score |  support |
|--------|-----------|----------|----------|----------|
|1       |1.00       |   1.00   |   1.00   |     27   |
|2       |0.96       |   1.00   |   0.98   |     26   |
|3       |1.00       |   1.00   |   1.00   |    583   |
|4       |1.00       |   1.00   |   1.00   |    327   |
|5       |1.00       |   1.00   |   1.00   |     38   |
|6       |1.00       |   1.00   |   1.00   |     15   |
|7       |0.81       |   0.76   |   0.79   |     29   |
|8       |0.80       |   0.93   |   0.86   |     46   |
|9       |1.00       |   1.00   |   1.00   |     35   |
|10      |1.00       |   1.00   |   1.00   |     31   |
|11      |1.00       |   0.99   |   0.99   |     86   |
|12      |1.00       |   0.99   |   0.99   |     75   |
|13      |1.00       |   1.00   |   1.00   |     37   |
|14      |1.00       |   1.00   |   1.00   |     35   |
|15      |1.00       |   1.00   |   1.00   |     20   |
|16      |1.00       |   0.97   |   0.98   |     29   |
|17      |0.97       |   0.97   |   0.97   |     31   |
|18      |0.96       |   1.00   |   0.98   |     24   |
|19      |1.00       |   0.97   |   0.98   |     32   |
|20      |1.00       |   1.00   |   1.00   |     21   |
|21      |0.85       |   0.61   |   0.71   |     28   |
|22      |0.62       |   0.65   |   0.63   |     20   |
|23      |0.99       |   1.00   |   0.99   |     92   |
|24      |0.96       |   1.00   |   0.98   |     24   |
|25      |1.00       |   1.00   |   1.00   |    157   |
|  micro avg     |  0.98    |  0.98   |   0.98   |   1868 |
|   macro avg    |   0.96   |   0.95  |    0.95  |    1868 |
|weighted avg    |   0.98   |   0.98  |    0.98  |    1868 |


To view graph using tensorboard, open a terminal and type

```
tensorboard --logdir=logs/
```
